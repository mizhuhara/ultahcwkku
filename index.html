<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Sayangku</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Pacifico&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fad0c4, #a18cd1);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            padding: 20px;
            position: relative;
        }

        /* --- CLASS PENTING YANG HILANG SEBELUMNYA --- */
        .hidden { display: none !important; }
        /* ------------------------------------------- */

        /* Background hearts */
        .floating-hearts { position: fixed; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
        .heart {
            position: absolute; color: rgba(255, 107, 139, 0.3); font-size: 20px;
            animation: floatUp 15s linear infinite;
        }
        @keyframes floatUp {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        /* Loading screen */
        .loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 1000; transition: opacity 0.8s ease;
        }
        .loading-heart { font-size: 4rem; color: #ff6b8b; margin-bottom: 20px; animation: heartbeat 1.5s infinite; }
        @keyframes heartbeat {
            0% { transform: scale(1); } 5% { transform: scale(1.1); } 10% { transform: scale(1); }
            15% { transform: scale(1.1); } 20% { transform: scale(1); }
        }

        /* Main container */
        .container {
            background: rgba(255, 255, 255, 0.95); padding: 40px 30px; border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15); text-align: center;
            max-width: 450px; width: 100%; position: relative;
            animation: fadeIn 0.8s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .container::before {
            content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px;
            background: linear-gradient(45deg, #ff6b8b, #ffcc70, #8a5fff);
            border-radius: 27px; z-index: -1; opacity: 0.3;
        }

        /* Header */
        .title {
            font-family: 'Pacifico', cursive; color: #ff6b8b; font-size: 2.5rem;
            margin-bottom: 15px; text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.05);
        }
        .subtitle { color: #666; font-size: 1.1rem; margin-bottom: 25px; line-height: 1.5; }

        /* GIF Container */
        .gif-container {
            margin: 25px 0; border-radius: 20px; overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); height: 220px;
            display: flex; align-items: center; justify-content: center;
        }
        .gif-container img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; }
        .gif-container:hover img { transform: scale(1.05); }

        /* PIN Display */
        .pin-display { display: flex; justify-content: center; gap: 15px; margin: 25px 0; }
        .pin-dot {
            width: 25px; height: 25px; border-radius: 50%; background: #f0f0f0;
            border: 2px solid #ddd; transition: all 0.3s ease;
        }
        .pin-dot.filled {
            background: #ff6b8b; border-color: #ff6b8b; transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 107, 139, 0.4);
        }
        .pin-dot.active { animation: pulse 1.5s infinite; }
        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 107, 139, 0.4); }
            50% { transform: scale(1.15); box-shadow: 0 0 20px rgba(255, 107, 139, 0.6); }
        }

        /* Keypad */
        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 25px 0; }
        .keypad-btn {
            background: #fff; border: 2px solid #ff6b8b; border-radius: 15px; height: 70px;
            font-size: 1.8rem; font-weight: bold; color: #ff6b8b; cursor: pointer;
            transition: all 0.3s ease; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(255, 107, 139, 0.1);
        }
        .keypad-btn:hover {
            background: #ff6b8b; color: white; transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 139, 0.3);
        }
        .keypad-btn:active { transform: translateY(0); }

        /* Buttons */
        .action-btn {
            background: #ff6b8b; color: white; border: none; padding: 15px 30px;
            border-radius: 50px; font-size: 1.1rem; cursor: pointer; transition: all 0.3s ease;
            font-weight: bold; margin: 10px; display: inline-flex; align-items: center;
            justify-content: center; gap: 10px; box-shadow: 0 5px 15px rgba(255, 107, 139, 0.3);
        }
        .action-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(255, 107, 139, 0.4); }
        .action-btn:active { transform: translateY(0); }
        .action-btn.yes { background: #4CAF50; box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3); }
        .action-btn.no { background: #ff6b6b; box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3); }
        .action-btn.secondary { background: #8a5fff; box-shadow: 0 5px 15px rgba(138, 95, 255, 0.3); }
        .action-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; box-shadow: none; }

        /* Photo frame */
        .photo-frame {
            margin: 25px 0; border-radius: 20px; overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        .photo-frame img { width: 100%; height: 250px; object-fit: cover; transition: transform 0.5s ease; }
        .photo-frame:hover img { transform: scale(1.05); }
        .caption { background: white; padding: 20px; font-style: italic; color: #666; border-top: 3px solid #ff6b8b; }

        /* Music player */
        .music-container {
            margin: 25px 0; padding: 20px; background: rgba(255, 255, 255, 0.9);
            border-radius: 20px; border: 2px dashed #ff6b8b;
        }
        .music-title { color: #ff6b8b; font-size: 1.3rem; margin-bottom: 10px; font-weight: bold; }
        .music-artist { color: #666; margin-bottom: 20px; font-size: 0.9rem; }

        /* Message box */
        .message-box {
            background: rgba(255, 255, 255, 0.9); border-radius: 15px; padding: 25px;
            margin: 25px 0; text-align: left; line-height: 1.8; border-left: 5px solid #ff6b8b;
            max-height: 300px; overflow-y: auto; min-height: 150px;
        }

        .button-container { display: flex; justify-content: center; gap: 15px; margin-top: 25px; flex-wrap: wrap; }
        .error-message {
            color: #ff6b6b; margin-top: 15px; padding: 10px 15px; background: rgba(255, 107, 107, 0.1);
            border-radius: 10px; border: 1px solid rgba(255, 107, 107, 0.2); display: none;
        }
        .hint-box {
            background: rgba(255, 255, 255, 0.9); border-radius: 10px; padding: 15px;
            margin-top: 20px; border-left: 4px solid #8a5fff;
        }
        .hint-title { color: #8a5fff; font-weight: bold; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }

        @media (max-width: 480px) {
            .container { padding: 30px 20px; }
            .title { font-size: 2rem; }
            .gif-container { height: 180px; }
            .keypad { gap: 12px; }
            .keypad-btn { height: 60px; font-size: 1.6rem; }
            .action-btn { padding: 12px 25px; font-size: 1rem; }
        }

        .animate-pop { animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>
    <div class="floating-hearts" id="floatingHearts"></div>

    <div class="loading-screen" id="loadingScreen">
        <div class="loading-heart"><i class="fas fa-heart"></i></div>
        <h2 style="color: #ff6b8b; margin-bottom: 10px;">Memuat Kejutan...</h2>
        <p style="color: #666;">Sebentar ya sayang ‚ù§Ô∏è</p>
    </div>

    <div class="container animate-pop" id="section-pin">
        <h2 class="title">Security Check!</h2>
        <p class="subtitle">Masukkan kode rahasia untuk masuk ‚ù§Ô∏è</p>
        
        <div class="gif-container">
          <div class="tenor-gif-embed" data-postid="21394776" data-share-method="host" data-aspect-ratio="1" data-width="100%"><a href="https://tenor.com/view/tkthao219-bubududu-panda-gif-21394776">Tkthao219 Bubududu Sticker</a>from <a href="https://tenor.com/search/tkthao219-stickers">Tkthao219 Stickers</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
        </div>
        
        <div class="pin-display" id="pin-display"></div>
        
        <div class="keypad">
            <button class="keypad-btn" data-digit="1">1</button>
            <button class="keypad-btn" data-digit="2">2</button>
            <button class="keypad-btn" data-digit="3">3</button>
            <button class="keypad-btn" data-digit="4">4</button>
            <button class="keypad-btn" data-digit="5">5</button>
            <button class="keypad-btn" data-digit="6">6</button>
            <button class="keypad-btn" data-digit="7">7</button>
            <button class="keypad-btn" data-digit="8">8</button>
            <button class="keypad-btn" data-digit="9">9</button>
            <button class="keypad-btn" id="clear-btn"><i class="fas fa-times"></i></button>
            <button class="keypad-btn" data-digit="0">0</button>
            <button class="keypad-btn" id="backspace-btn"><i class="fas fa-backspace"></i></button>
        </div>
        
        <button class="action-btn" id="submit-btn" disabled>
            <i class="fas fa-lock-open"></i> Masuk
        </button>
        
        <div class="error-message" id="error-msg">
            <i class="fas fa-exclamation-circle"></i> Pin salah sayang :p
        </div>
        
        <div class="hint-box">
            <div class="hint-title"><i class="fas fa-lightbulb"></i> Petunjuk</div>
            <p style="color: #666; font-size: 0.9rem;">PIN adalah tanggal spesial kita (24227)</p>
        </div>
    </div>

    <div class="container hidden" id="section-confirm">
        <h2 class="title">Hai Sayang!</h2>
        <p class="subtitle">Kamu siap untuk membuka hadiah ini?</p>
        <div class="gif-container">
           <div class="tenor-gif-embed" data-postid="23747251" data-share-method="host" data-aspect-ratio="1" data-width="100%"><a href="https://tenor.com/view/tkthao219-bubududu-panda-gif-23747251">Tkthao219 Bubududu Sticker</a>from <a href="https://tenor.com/search/tkthao219-stickers">Tkthao219 Stickers</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
        </div>
        <div class="button-container">
            <button class="action-btn yes" onclick="nextSection('section-greeting')"><i class="fas fa-check"></i> Yess!</button>
            <button class="action-btn no" onclick="nextSection('section-reject')"><i class="fas fa-times"></i> Noo</button>
        </div>
    </div>

    <div class="container hidden" id="section-reject">
        <h2 class="title">Yahhh... ü•∫</h2>
        <div class="gif-container">
           <div class="tenor-gif-embed" data-postid="14967220799009428095" data-share-method="host" data-aspect-ratio="0.948276" data-width="100%"><a href="https://tenor.com/view/kh%C3%B3c-gif-14967220799009428095">Kh√≥c Sticker</a>from <a href="https://tenor.com/search/kh%C3%B3c-stickers">Kh√≥c Stickers</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
        </div>
        <p class="subtitle">Tapi hadiah ini khusus buat kamu lho!</p>
        <button class="action-btn secondary" onclick="nextSection('section-confirm')"><i class="fas fa-arrow-left"></i> Kembali</button>
    </div>

    <div class="container hidden" id="section-greeting">
        <h2 class="title">Selamat Ulang Tahun! üéâ</h2>
        <p class="subtitle">Semoga harimu menyenangkan!</p>
        <div class="gif-container">
            <div class="tenor-gif-embed" data-postid="7935144640471707564" data-share-method="host" data-aspect-ratio="1.01852" data-width="100%"><a href="https://tenor.com/view/birthday-cake-mochi-mochi-peach-cat-gif-7935144640471707564">Birthday Cake Sticker</a>from <a href="https://tenor.com/search/birthday-stickers">Birthday Stickers</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
        </div>
        <button class="action-btn" onclick="nextSection('section-gift-intro')"><i class="fas fa-gift"></i> Buka Hadiah</button>
    </div>

    <div class="container hidden" id="section-gift-intro">
        <h2 class="title">Surprise! üéÅ</h2>
        <p class="subtitle">Aku memiliki sesuatu untukmu...</p>
        <div class="gif-container">
            <div class="tenor-gif-embed" data-postid="12101845614097884979" data-share-method="host" data-aspect-ratio="1" data-width="100%"><a href="https://tenor.com/view/dudu-bubu-gif-12101845614097884979">Dudu Bubu Sticker</a>from <a href="https://tenor.com/search/dudu+bubu-stickers">Dudu Bubu Stickers</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
        </div>
        <button class="action-btn" onclick="nextSection('section-photo-1')"><i class="fas fa-heart"></i> Lihat Sesuatu</button>
    </div>

    <div class="container hidden" id="section-photo-1">
        <div class="photo-frame">
            <img src="1.jpeg" alt="Foto Kenangan 1">
            <div class="caption">"Ingat momen ini? Kamu cantik banget di sini."</div>
        </div>
        <div class="button-container">
            <button class="action-btn secondary" onclick="nextSection('section-gift-intro')"><i class="fas fa-arrow-left"></i> Kembali</button>
            <button class="action-btn" onclick="nextSection('section-photo-2')">Lanjut <i class="fas fa-arrow-right"></i></button>
        </div>
    </div>

    <div class="container hidden" id="section-photo-2">
        <div class="photo-frame">
            <img src="2.jpeg" alt="Foto Kenangan 2">
            <div class="caption">""</div>
        </div>
        <div class="button-container">
            <button class="action-btn secondary" onclick="nextSection('section-photo-1')"><i class="fas fa-arrow-left"></i> Kembali</button>
            <button class="action-btn" onclick="nextSection('section-photo-3')">Lanjut <i class="fas fa-arrow-right"></i></button>
        </div>
    </div>

    <div class="container hidden" id="section-photo-3">
        <div class="photo-frame">
            <img src="3.jpeg" alt="Foto Kenangan 3">
            <div class="caption">"Semoga di umur yang baru ini kamu makin bahagia ya."</div>
        </div>
        <div class="button-container">
            <button class="action-btn secondary" onclick="nextSection('section-photo-2')"><i class="fas fa-arrow-left"></i> Kembali</button>
            <button class="action-btn" onclick="nextSection('section-music')">Lanjut ke Musik <i class="fas fa-arrow-right"></i></button>
        </div>
    </div>

    <div class="container hidden" id="section-music">
        <h2 class="title">Lagu Untukmu üéµ</h2>
        <p class="subtitle">Putar lagu ini dulu ya sebelum lanjut...</p>
        <div class="music-container">
    <h3 class="music-title">Everything U Are</h3>
    <p class="music-artist">Hindia</p>

    <div class="spotify-container" style="height: 152px;">
    <iframe 
        style="border-radius:12px" 
        src="https://open.spotify.com/embed/track/5WOSNVChcadlsCRiqXE45K?utm_source=generator" 
        width="100%" 
        height="152" 
        frameBorder="0" 
        allowfullscreen="" 
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
        loading="lazy">
    </iframe>
</div>

    <div class="button-container" style="margin-top: 20px;">
        <button class="action-btn" onclick="nextSection('section-message')">
            <i class="fas fa-forward"></i> Lanjut
        </button>
    </div>
</div>
        
        <audio id="birthday-audio" loop>
            <source src="https://cdn.pixabay.com/download/audio/2022/03/10/audio_7bdc7c8c2a.mp3" type="audio/mpeg">
            Browser Anda tidak mendukung elemen audio.
        </audio>
    </div>

    <div class="container hidden" id="section-message">
        <h2 class="title">Pesan Untukmu üíå</h2>
        <p class="subtitle">Dengarkan baik-baik ya sayang...</p>
        
        <div class="message-box">
            <div id="typing-text"></div>
        </div>
        
        <div class="button-container">
            <button class="action-btn secondary" onclick="nextSection('section-music')"><i class="fas fa-arrow-left"></i> Kembali</button>
            <button class="action-btn" id="btn-restart" onclick="location.reload()" style="display: none;">
                <i class="fas fa-redo"></i> Ulangi Dari Awal
            </button>
        </div>
    </div>

    <script>
        const CORRECT_PIN = "24227";
        const PIN_LENGTH = 5;
        const deepMessage = `Hai sayang, selamat ulang tahun ya! <br><br>
Aku cuma mau bilang terima kasih sudah hadir di hidupku. Kamu adalah alasan kenapa aku selalu tersenyum setiap hari. Maaf kalau aku belum bisa kasih dunia buat kamu, tapi aku janji bakal selalu berusaha bikin kamu bahagia. <br><br>
Semoga di tahun ini, semua impian kamu tercapai. Tetaplah jadi orang baik yang aku kenal. I love you more than words can say. ‚ù§Ô∏è`;
        
        let enteredPin = "";
        let isPlaying = false;
        let audio = null;
        let typeIndex = 0;

        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.getElementById('loadingScreen').style.opacity = '0';
                setTimeout(() => { document.getElementById('loadingScreen').style.display = 'none'; }, 800);
            }, 2000);
            
            createFloatingHearts();
            initPinDisplay();
            setupKeypad();
            setupAudio();
        });

        function createFloatingHearts() {
            const heartsContainer = document.getElementById('floatingHearts');
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '‚ù§Ô∏è';
                heart.style.fontSize = `${Math.random() * 20 + 15}px`;
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.animationDelay = `${Math.random() * 5}s`;
                heart.style.color = ['#ff6b8b', '#ff8e6b', '#ffcc70', '#8a5fff'][Math.floor(Math.random() * 4)];
                heartsContainer.appendChild(heart);
            }
        }

        function initPinDisplay() {
            const pinDisplay = document.getElementById('pin-display');
            pinDisplay.innerHTML = '';
            for (let i = 0; i < PIN_LENGTH; i++) {
                const dot = document.createElement('div');
                dot.className = 'pin-dot' + (i === 0 && enteredPin.length === 0 ? ' active' : '');
                pinDisplay.appendChild(dot);
            }
            updatePinDisplay();
        }

        function updatePinDisplay() {
            const dots = document.querySelectorAll('.pin-dot');
            dots.forEach((dot, index) => {
                dot.classList.remove('filled', 'active');
                if (index < enteredPin.length) dot.classList.add('filled');
                if (index === enteredPin.length) dot.classList.add('active');
            });
            document.getElementById('submit-btn').disabled = enteredPin.length !== PIN_LENGTH;
        }

        function setupKeypad() {
            document.querySelectorAll('.keypad-btn[data-digit]').forEach(btn => {
                btn.addEventListener('click', () => {
                    if (enteredPin.length < PIN_LENGTH) {
                        enteredPin += btn.getAttribute('data-digit');
                        updatePinDisplay();
                        animateButton(btn);
                    }
                });
            });
            document.getElementById('clear-btn').addEventListener('click', () => {
                enteredPin = ""; updatePinDisplay(); animateButton(document.getElementById('clear-btn'));
            });
            document.getElementById('backspace-btn').addEventListener('click', () => {
                if (enteredPin.length > 0) {
                    enteredPin = enteredPin.slice(0, -1);
                    updatePinDisplay();
                    animateButton(document.getElementById('backspace-btn'));
                }
            });
            document.getElementById('submit-btn').addEventListener('click', checkPin);
        }

        function animateButton(button) {
            button.style.transform = 'scale(0.9)';
            setTimeout(() => { button.style.transform = ''; }, 150);
        }

        function checkPin() {
            if (enteredPin === CORRECT_PIN) {
                nextSection('section-confirm');
                document.getElementById('error-msg').style.display = 'none';
            } else {
                document.getElementById('error-msg').style.display = 'block';
                setTimeout(() => { enteredPin = ""; updatePinDisplay(); }, 1000);
            }
        }

        function setupAudio() {
            audio = document.getElementById('birthday-audio');
            const playBtn = document.getElementById('play-btn');
            const playIcon = document.getElementById('play-icon');
            
            playBtn.addEventListener('click', () => {
                if (isPlaying) {
                    audio.pause();
                    playIcon.className = 'fas fa-play';
                    playBtn.innerHTML = '<i class="fas fa-play" id="play-icon"></i> Putar';
                } else {
                    audio.play().catch(e => { alert("Klik layar sekali untuk mengizinkan audio."); });
                    playIcon.className = 'fas fa-pause';
                    playBtn.innerHTML = '<i class="fas fa-pause" id="play-icon"></i> Jeda';
                }
                isPlaying = !isPlaying;
            });
        }

        function nextSection(id) {
            if (audio && isPlaying && id !== 'section-message') {
                 // Biarkan lagu main terus kecuali diminta stop atau logic lain
            }
            
            document.querySelectorAll('.container').forEach(el => {
                el.classList.add('hidden');
                el.classList.remove('animate-pop');
            });
            
            const target = document.getElementById(id);
            target.classList.remove('hidden');
            target.classList.add('animate-pop');
            
            if (id === 'section-message') {
                setTimeout(startTypingEffect, 500);
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function startTypingEffect() {
            const textElement = document.getElementById('typing-text');
            textElement.innerHTML = '';
            typeIndex = 0;
            document.getElementById('btn-restart').style.display = 'none';
            typeWriter();
        }

        function typeWriter() {
            const textElement = document.getElementById('typing-text');
            if (typeIndex < deepMessage.length) {
                if (deepMessage.substring(typeIndex, typeIndex + 4) === '<br>') {
                    textElement.innerHTML += '<br>';
                    typeIndex += 4;
                } else {
                    textElement.innerHTML += deepMessage.charAt(typeIndex);
                    typeIndex++;
                }
                setTimeout(typeWriter, 30);
            } else {
                document.getElementById('btn-restart').style.display = 'inline-flex';
            }
        }
    </script>
</body>
</html>